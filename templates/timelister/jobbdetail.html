{% extends 'base.html' %}

{% block head_title %}
Jobber
{% endblock head_title %}
{% block content %}
{{ jobbform.media }}
{% load crispy_forms_tags %}
{% include 'func/modals.html' %}


<div class="col-lg-8">
    {% include 'func/messages.html' %}
    <div class="card border-0 shadow mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between">
                <div class="p-2">
                    <h2 class="card-body">ordre nr:</h2>
                </div>
                <div class="p-2">
                    <h1>{{ jobb.ordre_nr }}</h1>
                </div>
                <div class="p-2">
                    <a href="{% url 'delete_jobber' jobb.ordre_nr %}" class="confirm-delete" data-toggle="modal"
                        data-target="#confirmTimerDeleteModal" id="deleteButton{{jobb.ordre_nr}}">
                        <i class="fas fa-trash-alt" tooltip-toggle="tooltip" title="Delete"></i></a>
                </div>
            </div>
            <p>Tittel: {{ jobb }}</p>
            <p>Adresse: {{ jobb.adresse }}</p>
            <p>Telefon nr: {{ jobb.telefon_nr }}</p>
            <p>beskrivelse: {{ jobb.beskrivelse }}</p>
            <p>Matriell:<br>
                {% for mat in jobb.matriell.all %}
                {{ mat.antall }} {{ mat }}<br>
                {% endfor %}
            </p>
        </div>
    </div>

    <div class="card border-0 shadow mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between">
                <div class="p-2">
                    <h2 class="card-body">Matriell liste</h2>
                </div>
                <div class="p-2"></div>
                <div class="p-2">
                    <h3></h3>
                </div>
            </div>
            <table class="table table-striped table-borderless">
                <thead class="thead-custom">
                    <tr>
                        <th scope="col">Elnr</th>
                        <th scope="col">Tittel</th>
                        <th scope="col">Leverand√∏r</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                    {% for mat in matriell %}
                    <tr>
                        <th scope="row">{{ mat.el_nr }}</th>
                        <td><a href="{% url 'add-matriell' object_id=mat.pk jobb_id=jobb.pk %}">{{ mat }}</a></td>
                        <td>{{ mat.leverandor }}</td>
                        <td><a href="{% url 'delete_matriell' object_id=mat.id %}" class="confirm-delete"
                                data-toggle="modal" data-target="#confirmTimerDeleteModal" id="deleteButton{{mat.id}}">
                                <i class="fas fa-trash-alt" tooltip-toggle="tooltip" title="Delete"></i></a>
                        </td>
                    </tr>
                    {% endfor %}

                </tbody>
            </table>
        </div>
    </div>

    <div class="card border-0 shadow mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between">
                <div class="p-2">
                    <h2 class="card-body">Edit Jobb</h2>
                </div>
                <div class="p-2"></div>
                <div class="p-2">
                    <h3>{{ jobb.ordre_nr }}</h3>
                </div>
            </div>

            <form method="POST" action=".">
                {% csrf_token %}
                {{ editjobb|crispy }}
                <button type="submit" class="btn btn-primary button-main">Submit</button>
            </form>
        </div>
    </div>

</div>
<!-- ###### sidebar ##### -->
<div class="col-lg-4">
    <!-- ### Sidebox ### -->
    <div class="card border-0 shadow mb-4 d-none d-lg-block">
        <div class="card-body">
            <div class="form-group">
                <h2>Fyll inn ny jobb:
                </h2>
                <form method="POST" action=".">
                    {% csrf_token %}
                    {{ jobbform|crispy }}
                    <button type="submit" class="btn btn-primary button-card">Submit</button>
                </form>
            </div>
        </div>
    </div>

</div>

{% endblock content %}